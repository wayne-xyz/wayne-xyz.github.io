---
layout: default
---
<div class="post-container">
  <article class="post">
    <header class="post-header">
      <h1>{{ page.title }}</h1>
      <p class="post-meta">{{ page.date | date: "%B %d, %Y" }}</p>
    </header>
    <div class="post-content">
      {{ content }}
    </div>
  </article>

  <!-- Table of Contents -->
  <aside class="toc-wrapper" id="toc-wrapper">
    <nav class="toc">
      <h3 class="toc-title">Table of Contents</h3>
      <ul class="toc-list" id="toc-list">
        <!-- Generated by JavaScript -->
      </ul>
    </nav>
  </aside>
</div>

<script>
(function() {
  var tocWrapper = document.getElementById('toc-wrapper');
  var tocList = document.getElementById('toc-list');
  var postContent = document.querySelector('.post-content');

  if (!postContent) return;

  // Generate TOC from h2 and h3 headings
  var headings = postContent.querySelectorAll('h2, h3');

  if (headings.length === 0) {
    // No headings, hide TOC completely
    tocWrapper.style.display = 'none';
    return;
  }

  var tocLinks = [];

  headings.forEach(function(heading, index) {
    // Add ID to heading if it doesn't have one
    if (!heading.id) {
      heading.id = 'heading-' + index;
    }

    var li = document.createElement('li');
    li.className = heading.tagName.toLowerCase() === 'h3' ? 'toc-h3' : 'toc-h2';

    var a = document.createElement('a');
    a.href = '#' + heading.id;
    a.textContent = heading.textContent;
    a.setAttribute('data-heading-id', heading.id);

    li.appendChild(a);
    tocList.appendChild(li);
    tocLinks.push({ link: a, heading: heading });
  });

  // Show/hide TOC on scroll and highlight active section
  var scrollThreshold = 300; // Show after scrolling 300px

  function handleScroll() {
    // Show/hide TOC
    if (window.scrollY > scrollThreshold) {
      tocWrapper.classList.add('visible');
    } else {
      tocWrapper.classList.remove('visible');
    }

    // Highlight active section
    var scrollPosition = window.scrollY + 100;

    for (var i = tocLinks.length - 1; i >= 0; i--) {
      if (tocLinks[i].heading.offsetTop <= scrollPosition) {
        tocLinks.forEach(function(item) {
          item.link.classList.remove('active');
        });
        tocLinks[i].link.classList.add('active');
        break;
      }
    }
  }

  window.addEventListener('scroll', handleScroll);
  handleScroll(); // Check initial state
})();
</script>


